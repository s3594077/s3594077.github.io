<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameOfLife</title>
    <style>
        body {
            background-color: #2E2E2E;
        }

        h1 {
            position: absolute;
            color: #ffffff;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            top: 100px;
            left: calc(50% - 400px);
        }

        #gridCanvas {
            position: absolute;
            width: 800px;
            height: auto;
            background-color: #9e9e9e;
            -webkit-box-shadow: inset 0px 0px 14px 5px rgba(0, 0, 0, 1);
            -moz-box-shadow: inset 0px 0px 14px 5px rgba(0, 0, 0, 1);
            box-shadow: inset 0px 0px 14px 5px rgba(0, 0, 0, 1);
            left: calc(50% - 400px);
            top: 200px;
        }
    </style>
</head>

<body>
    <h1>The Game Of Life:</h1>
    <canvas id="gridCanvas"></canvas>
    <script type="text/javascript">
        function createArray(rows) {
            var arr = [];
            for (var i = 0; i < rows; i++) {
                arr[i] = [];
            }
            return arr;
        }

        function fillRandom(gridWidth, gridHeight) {
            for (var j = 0; j < gridHeight; j++) {
                for (var k = 0; k < gridWidth; k++) {
                    var rawRandom = Math.random();
                    var intRandom = (rawRandom * 2);
                    var binaryRandom = Math.floor(intRandom);
                    if (binaryRandom === 1) {
                        grid[j][k] = 1;
                    } else {
                        grid[j][k] = 0;
                    }
                }
            }
        }

        function drawGrid() {
            var canvas = document.getElementById("gridCanvas");
            var context = canvas.getContext("2d");
            context.clearRect(0, 0, 800, 800);
            for (var j = 0; j < gridHeight; j++) {
                for (var k = 0; k < gridWidth; k++) {
                    if (grid[j][k] === 1) {
                        context.fillStyle = "#2D882D";
                        context.fillRect(j * 2, k * 2, 1, 1);
                    }
                }
            }
        }

        function updateGrid() {
            for (var j = 1; j < gridHeight - 1; j++) {
                for (var k = 1; k < gridWidth - 1; k++) {
                    var totalCells = 0;
                    totalCells += grid[j - 1][k - 1];
                    totalCells += grid[j - 1][k];
                    totalCells += grid[j - 1][k + 1];
                    totalCells += grid[j][k - 1];
                    totalCells += grid[j][k + 1];
                    totalCells += grid[j + 1][k - 1];
                    totalCells += grid[j + 1][k];
                    totalCells += grid[j + 1][k + 1];

                    if (grid[j][k] === 0) {
                        switch (totalCells) {
                            case 3:
                                mirrorGrid[j][k] = 1;
                                break;
                            default:
                                mirrorGrid[j][k] = 0;
                        }
                    } else if (grid[j][k] === 1) {
                        switch (totalCells) {
                            //case 0:
                            case 0:
                                mirrorGrid[j][k] = 0;
                                break;
                            case 1:
                                if (Math.random() >= 0.1){
                                    mirrorGrid[j][k] = 0;
                                } else {
                                    mirrorGrid[j][k] = 1;
                                }
                                break;
                            case 2:
                            case 3:
                                mirrorGrid[j][k] = 1;
                                break;
                            /*
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                            case 8:
                            mirrorGrid[j][k] = 0;
                            break;
                            */
                            default: mirrorGrid[j][k] = 0;
                        }
                    }
                }
            }

            for (var j = 0; j < gridHeight; j++) {
                for (var k = 0; k < gridWidth; k++) {
                    grid[j][k] = mirrorGrid[j][k];
                }
            }
        }

        var gridWidth = 200;
        var gridHeight = 200;
        var grid = createArray(gridWidth);
        var mirrorGrid = createArray(gridWidth);

        function tick() {
            drawGrid(gridWidth, gridHeight);
            updateGrid(gridWidth, gridHeight);
            requestAnimationFrame(tick);
        }

        fillRandom(gridWidth, gridHeight);

        tick();


    </script>
</body>

</html>